<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CoreAuth | Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
  
    <div class="container dashboard-wide">
      <header style="margin-bottom: 40px;">
            <h1>Welcome, <span id="welcomeName" style="color:var(--primary)">User</span></h1>
            <p style="color: #64748b;">System status: <span style="color: #10b981; font-weight: bold;">● Live Connection</span></p>
        </header>
        <section class="tech-flow">
            <div class="badge">Frontend: JS/HTML</div>
            <span style="color:var(--border)">→</span>
            <div class="badge">Backend: Node/Express</div>
            <span style="color:var(--border)">→</span>
            <div class="badge">Database: MongoDB Atlas</div>
        </section>

        <section class="info-grid">
            <div class="info-card"><h3>Client Side</h3><p>Sends requests via Fetch API to the backend controller.</p></div>
            <div class="info-card"><h3>Server Logic</h3><p>Processes JWT tokens and validates user data.</p></div>
            <div class="info-card"><h3>Cloud Data</h3><p>Stores documents in MongoDB as JSON objects.</p></div>
        </section>
<h1>DATABASE</h1><br>
        <section class="table-wrapper">
            <table>
                <thead><tr><th>User Name</th><th>Email</th><th>Role</th></tr></thead>
                <tbody id="userList"></tbody>
            </table>
        </section>

        <button onclick="logout()" class="logout-btn" style="background:transparent; border:1px solid #ef4444; color:#ef4444; width:auto; padding:10px 30px;">Logout</button>
    </div>

    <script>
        async function loadUsers() {
            const res = await fetch('/api/auth/all-users');
            const users = await res.json();
            document.getElementById('userList').innerHTML = users.map(u => 
                `<tr><td>${u.name}</td><td>${u.email}</td><td><span class="badge" style="font-size:10px">${u.role}</span></td></tr>`
            ).join('');
        }
        function logout() { localStorage.clear(); window.location.href = 'index.html'; }
        loadUsers();
    </script>
</body>
</html>